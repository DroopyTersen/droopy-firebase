{"version":3,"sources":["../src/database.js"],"names":["firebase","require","Collection","connect","config","apps","length","initializeApp","db","database","collections","name","window","Proxy","collectionsProxy","get","target","err","console","log","module","exports","create"],"mappings":";;AAAA,IAAIA,WAAWC,QAAQ,UAAR,CAAf;AACA,IAAIC,aAAaD,QAAQ,cAAR,CAAjB;;AAEA,IAAIE,UAAU,SAAVA,OAAU,CAASC,MAAT,EAAiB;AAC3B,QAAI,CAACJ,SAASK,IAAT,CAAcC,MAAnB,EAA2B;AACvBN,iBAASO,aAAT,CAAuBH,MAAvB;AACH;AACD,QAAII,KAAKR,SAASS,QAAT,EAAT;AACAD,OAAGE,WAAH,GAAiB;AAAA,eAAQ,IAAIR,UAAJ,CAAeM,EAAf,EAAkBG,IAAlB,CAAR;AAAA,KAAjB;AACA,QAAI;AACA,YAAIC,OAAOC,KAAX,EAAkB;AACd,gBAAIC,mBAAmB,IAAID,KAAJ,CAAU,EAAV,EAAc;AACjCE,qBAAK,aAASC,MAAT,EAAiBL,IAAjB,EAAuB;AACxB,wBAAI,EAAEA,QAAQK,MAAV,CAAJ,EAAuB;AACnB,+BAAO,IAAId,UAAJ,CAAeM,EAAf,EAAmBG,IAAnB,CAAP;AACH;AACD,2BAAOK,OAAOL,IAAP,CAAP;AACH;AANgC,aAAd,CAAvB;AAQAG,6BAAiBJ,WAAjB,GAA+B;AAAA,uBAAQ,IAAIR,UAAJ,CAAeM,EAAf,EAAkBG,IAAlB,CAAR;AAAA,aAA/B;AACA,mBAAOG,gBAAP;AACH;AACJ,KAbD,CAaE,OAAMG,GAAN,EAAW;AACTC,gBAAQC,GAAR,CAAY,qEAAZ;AACH;AACD,WAAOX,EAAP;AACH,CAvBD;;AAyBAY,OAAOC,OAAP,GAAiB,EAAElB,gBAAF,EAAWmB,QAAQnB,OAAnB,EAAjB","file":"database.js","sourcesContent":["var firebase = require(\"firebase\");\r\nvar Collection = require(\"./collection\");\r\n\r\nvar connect = function(config) {\r\n    if (!firebase.apps.length) {\r\n        firebase.initializeApp(config);\r\n    }\r\n    var db = firebase.database();\r\n    db.collections = name => new Collection(db,name);\r\n    try {\r\n        if (window.Proxy) {\r\n            let collectionsProxy = new Proxy({}, {\r\n                get: function(target, name) {\r\n                    if (!(name in target)) {\r\n                        return new Collection(db, name);                    \r\n                    }\r\n                    return target[name];\r\n                }\r\n            });\r\n            collectionsProxy.collections = name => new Collection(db,name);\r\n            return collectionsProxy;\r\n        }\r\n    } catch(err) {\r\n        console.log(\"droopy-firebase: Skipping Proxy. It's not supported by your browser\")\r\n    }\r\n    return db;\r\n}\r\n\r\nmodule.exports = { connect, create: connect };"]}