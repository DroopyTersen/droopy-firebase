{"version":3,"sources":["../src/database.js"],"names":["firebase","require","Collection","connect","config","apps","length","initializeApp","db","database","collectionsProxy","Proxy","get","target","name","module","exports","create"],"mappings":";;AAAA,IAAIA,WAAWC,QAAQ,UAAR,CAAf;AACA,IAAIC,aAAaD,QAAQ,cAAR,CAAjB;;AAEA,IAAIE,UAAU,SAAVA,OAAU,CAASC,MAAT,EAAiB;AAC3B,QAAI,CAACJ,SAASK,IAAT,CAAcC,MAAnB,EAA2B;AACvBN,iBAASO,aAAT,CAAuBH,MAAvB;AACH;AACD,QAAII,KAAKR,SAASS,QAAT,EAAT;;AAEA,QAAIC,mBAAmB,IAAIC,KAAJ,CAAU,EAAV,EAAc;AACjCC,aAAK,aAASC,MAAT,EAAiBC,IAAjB,EAAuB;AACxB,gBAAI,EAAEA,QAAQD,MAAV,CAAJ,EAAuB;AACnB,uBAAO,IAAIX,UAAJ,CAAeM,EAAf,EAAmBM,IAAnB,CAAP;AACH;AACD,mBAAOD,OAAOC,IAAP,CAAP;AACH;AANgC,KAAd,CAAvB;;AASA;AACA;AACA,WAAOJ,gBAAP;AACH,CAlBD;;AAoBAK,OAAOC,OAAP,GAAiB,EAAEb,gBAAF,EAAWc,QAAQd,OAAnB,EAAjB","file":"database.js","sourcesContent":["var firebase = require(\"firebase\");\r\nvar Collection = require(\"./collection\");\r\n\r\nvar connect = function(config) {\r\n    if (!firebase.apps.length) {\r\n        firebase.initializeApp(config);\r\n    }\r\n    var db = firebase.database();\r\n\r\n    var collectionsProxy = new Proxy({}, {\r\n        get: function(target, name) {\r\n            if (!(name in target)) {\r\n                return new Collection(db, name);                    \r\n            }\r\n            return target[name];\r\n        }\r\n    });\r\n\r\n    //supports dynamic property names mapping to collections\r\n    //Example: db.users or db.settings or db.posts\r\n    return collectionsProxy;\r\n}\r\n\r\nmodule.exports = { connect, create: connect };"]}